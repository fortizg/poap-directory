<header class="py-5 poap-purple-light">
  <div class="container text-center my-0 my-md-3 my-lg-5">
    {%- assign title = page.title | split: " " | first -%}
    <h1 class="display-6 fw-bold mb-3">{{title}} Resources</h1>
    {%- if page.permalink != "/en/resources/all" -%}
      <a href="/en/resources/all" class="btn btn-primary btn px-4 m-1">View All Resources</a>
    {%- endif -%}
  </div>
</header>


{%- assign all_categories = "" -%}
{%- for resource in site.data.resources -%}
  {%- assign all_categories = all_categories | append: ", " | append: resource.categories -%}
{%- endfor -%}
{%- assign all_categories = all_categories | append: ", official, community" -%}
{%- assign all_categories = all_categories | split: ", " | uniq | sort_natural -%}


<section class="container">
  <div class="row justify-content-center mt-5">
    <div class="col col-lg-6 col-md-10 text-center">
      {%- for category in all_categories -%}
        <a class="me-1 text-decoration-none" href="/en/resources/{{category}}">
          <span class="badge rounded-pill bg-light text-dark {{category}}">{{category}}</span>
        </a>
      {%- endfor -%}
    </div>
  </div>
</section>


<section class="container py-4 border-bottom">
  <div class="row row-cols-auto justify-content-center mt-4">
    {%- assign resources = site.data.resources -%}
    {%- assign filter = page.permalink | split: "/" | last -%}
    {%- if filter == "all" -%}
      {%- assign filter = "" -%}
    {%- elsif filter == "official" -%}
      {%- assign filter = "" -%}
      {%- assign resources = site.data.resources | where: "official", true -%}
    {%- elsif filter == "community" -%}
      {%- assign filter = "" -%}
      {%- assign resources = site.data.resources | where: "official", false -%}
    {%- endif -%}
    {%- for resource in resources -%}
      {%- if resource.categories contains filter -%}
        {%- if resource.link -%}
          <div class="col mb-4">
            <div class="card rounded-3 h-100" style="width: 18rem;">
              <div class="card-body d-flex align-items-start flex-column">
                <div class="mb-3">
                  {%- assign resource_categories = resource.categories | split: ", " -%}
                  {%- assign type = "community" -%}
                  {%- if resource.official == true -%}
                    {%- assign type = "official" -%}
                  {%- endif -%}
                  <a class="me-1" href="/en/resources/{{type}}"><span class="badge rounded-pill bg-light text-dark {{type}}">{{type}}</span></a>
                  {%- assign resource_categories = resource.categories | split: ", " -%}
                  {%- for category in resource_categories -%}
                    <a class="me-1" href="/en/resources/{{category}}"><span class="badge rounded-pill bg-light text-dark {{category}}">{{category}}</span></a>
                  {%- endfor -%}
                </div>
                <h5 class="card-title mb-1">
                  <a href="{{resource.link}}" target="_blank" class="text-decoration-none link-dark">{{resource.title}} {{site.data.icons.new_tab}}</a>
                </h5>
                <p class="mb-2 text-muted"><small>{{resource.creator}} </small></p>
                <p class="card-text flex-grow-1">{{resource.desc_short}}</p>
                <a href="" class="btn btn-outline-primary btn-sm">Details</a>
              </div>
            </div>
          </div>
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}
  </div>
</section>